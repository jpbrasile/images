<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600" width="800" height="600">
  <title>Générateur Bipolaire Temporel - Pont en H avec Plateau</title>
  <defs>
    <style>
      .wire { stroke: #000; stroke-width: 2; fill: none; }
      .label { font-family: Arial, sans-serif; font-size: 14px; fill: #000; }
      .label-big { font-family: Arial, sans-serif; font-size: 16px; fill: #000; font-weight: bold; }
      .label-small { font-family: Arial, sans-serif; font-size: 12px; fill: #666; }
    </style>

    <!-- Ground symbol -->
    <g id="gnd">
      <line x1="0" y1="0" x2="0" y2="5" stroke="#000" stroke-width="2"/>
      <line x1="-10" y1="5" x2="10" y2="5" stroke="#000" stroke-width="2"/>
      <line x1="-7" y1="10" x2="7" y2="10" stroke="#000" stroke-width="2"/>
      <line x1="-4" y1="15" x2="4" y2="15" stroke="#000" stroke-width="2"/>
    </g>

    <!-- Capacitor vertical -->
    <g id="capa">
      <line x1="0" y1="-15" x2="0" y2="-4" stroke="#000" stroke-width="2"/>
      <line x1="-10" y1="-4" x2="10" y2="-4" stroke="#000" stroke-width="3"/>
      <line x1="-10" y1="4" x2="10" y2="4" stroke="#000" stroke-width="3"/>
      <line x1="0" y1="4" x2="0" y2="15" stroke="#000" stroke-width="2"/>
    </g>

    <!-- Diode pointing UP (cathode at top) -->
    <g id="diode-up">
      <line x1="0" y1="-12" x2="0" y2="-6" stroke="#000" stroke-width="2"/>
      <line x1="-6" y1="-6" x2="6" y2="-6" stroke="#000" stroke-width="2"/>
      <polygon points="-6,6 6,6 0,-6" fill="#000"/>
      <line x1="0" y1="6" x2="0" y2="12" stroke="#000" stroke-width="2"/>
    </g>

    <!-- Diode pointing DOWN (cathode at bottom) -->
    <g id="diode-down">
      <line x1="0" y1="-12" x2="0" y2="-6" stroke="#000" stroke-width="2"/>
      <polygon points="-6,-6 6,-6 0,6" fill="#000"/>
      <line x1="-6" y1="6" x2="6" y2="6" stroke="#000" stroke-width="2"/>
      <line x1="0" y1="6" x2="0" y2="12" stroke="#000" stroke-width="2"/>
    </g>

    <!-- Switch -->
    <g id="switch">
      <line x1="0" y1="-10" x2="0" y2="-3" stroke="#000" stroke-width="2"/>
      <circle cx="0" cy="-3" r="2" fill="#000"/>
      <line x1="0" y1="-3" x2="10" y2="7" stroke="#000" stroke-width="2"/>
      <circle cx="0" cy="10" r="2" fill="#000"/>
      <line x1="0" y1="10" x2="0" y2="18" stroke="#000" stroke-width="2"/>
    </g>

    <!-- Arrow marker -->
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#00A"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="800" height="600" fill="#fff"/>

  <!-- ========== SINGLE DC BUS (+25kV) - CENTER TOP ========== -->

  <!-- Main +25kV bus bar (horizontal at top) -->
  <line x1="150" y1="60" x2="650" y2="60" class="wire" stroke-width="3"/>

  <!-- +25kV label -->
  <circle cx="400" cy="35" r="8" fill="none" stroke="#000" stroke-width="2"/>
  <line x1="394" y1="35" x2="406" y2="35" stroke="#000" stroke-width="2"/>
  <line x1="400" y1="29" x2="400" y2="41" stroke="#000" stroke-width="2"/>
  <text x="415" y="40" class="label-big">+25kV</text>

  <!-- Capacitor on bus -->
  <line x1="400" y1="60" x2="400" y2="80" class="wire"/>
  <use href="#capa" x="400" y="95"/>
  <line x1="400" y1="110" x2="400" y2="130" class="wire"/>
  <use href="#gnd" x="400" y="130"/>

  <!-- ========== LEFT HALF-BRIDGE (H1 + B1) ========== -->

  <!-- From bus to H1 -->
  <line x1="200" y1="60" x2="200" y2="95" class="wire"/>

  <!-- H1 Diode -->
  <line x1="200" y1="95" x2="165" y2="95" class="wire"/>
  <use href="#diode-up" x="165" y="115"/>
  <line x1="165" y1="127" x2="165" y2="145" class="wire"/>
  <line x1="165" y1="145" x2="200" y2="145" class="wire"/>

  <!-- H1 Switch -->
  <use href="#switch" x="200" y="110"/>
  <text x="215" y="120" class="label-big">H₁</text>

  <!-- Node A -->
  <line x1="200" y1="128" x2="200" y2="220" class="wire"/>
  <circle cx="200" cy="220" r="4" fill="#000"/>

  <!-- B1 Diode -->
  <line x1="200" y1="220" x2="200" y2="240" class="wire"/>
  <line x1="200" y1="240" x2="165" y2="240" class="wire"/>
  <use href="#diode-up" x="165" y="260"/>
  <line x1="165" y1="272" x2="165" y2="290" class="wire"/>
  <line x1="165" y1="290" x2="200" y2="290" class="wire"/>

  <!-- B1 Switch -->
  <use href="#switch" x="200" y="255"/>
  <text x="215" y="265" class="label-big">B₁</text>

  <!-- B1 to ground -->
  <line x1="200" y1="273" x2="200" y2="380" class="wire"/>

  <!-- ========== BT1: +V PLATEAU (connected to A) ========== -->

  <!-- Branch from A to BT1 -->
  <line x1="200" y1="220" x2="100" y2="220" class="wire"/>
  <line x1="100" y1="220" x2="100" y2="240" class="wire"/>

  <!-- BT1 Diode -->
  <use href="#diode-up" x="100" y="260"/>
  <text x="60" y="265" class="label-big">BT₁</text>

  <!-- BT1 Switch -->
  <line x1="100" y1="272" x2="100" y2="290" class="wire"/>
  <use href="#switch" x="100" y="305"/>

  <!-- BT1 to +V plateau voltage supply -->
  <line x1="100" y1="323" x2="100" y2="420" class="wire"/>

  <!-- +V Plateau voltage source -->
  <circle cx="100" cy="420" r="6" fill="none" stroke="#000" stroke-width="2"/>
  <line x1="96" y1="420" x2="104" y2="420" stroke="#000" stroke-width="2"/>
  <line x1="100" y1="416" x2="100" y2="424" stroke="#000" stroke-width="2"/>
  <line x1="100" y1="426" x2="100" y2="450" class="wire"/>
  <use href="#gnd" x="100" y="450"/>
  <text x="35" y="470" class="label">+V plateau</text>

  <!-- ========== CENTER CHAMBER ========== -->

  <!-- Wire A to chamber -->
  <line x1="200" y1="220" x2="330" y2="220" class="wire"/>
  <text x="240" y="210" class="label-big">A</text>

  <!-- Chamber (electrodes) -->
  <line x1="330" y1="220" x2="360" y2="220" class="wire"/>
  <line x1="360" y1="180" x2="360" y2="260" stroke="#000" stroke-width="4"/>
  <line x1="440" y1="180" x2="440" y2="260" stroke="#000" stroke-width="4"/>
  <line x1="440" y1="220" x2="470" y2="220" class="wire"/>

  <!-- Chamber label -->
  <text x="380" y="175" class="label">Cellule</text>

  <!-- E-field arrow (always same direction A→B) -->
  <line x1="375" y1="220" x2="420" y2="220" stroke="#00A" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="385" y="245" class="label-small" fill="#00A">E →</text>

  <!-- Wire chamber to B -->
  <line x1="470" y1="220" x2="600" y2="220" class="wire"/>
  <text x="540" y="210" class="label-big">B</text>
  <circle cx="600" cy="220" r="4" fill="#000"/>

  <!-- ========== RIGHT HALF-BRIDGE (H2 + B2) ========== -->

  <!-- From bus to H2 -->
  <line x1="600" y1="60" x2="600" y2="95" class="wire"/>

  <!-- H2 Diode -->
  <line x1="600" y1="95" x2="635" y2="95" class="wire"/>
  <use href="#diode-down" x="635" y="115"/>
  <line x1="635" y1="127" x2="635" y2="145" class="wire"/>
  <line x1="635" y1="145" x2="600" y2="145" class="wire"/>

  <!-- H2 Switch -->
  <use href="#switch" x="600" y="110"/>
  <text x="560" y="120" class="label-big">H₂</text>

  <!-- Node B -->
  <line x1="600" y1="128" x2="600" y2="220" class="wire"/>

  <!-- B2 Diode -->
  <line x1="600" y1="220" x2="600" y2="240" class="wire"/>
  <line x1="600" y1="240" x2="635" y2="240" class="wire"/>
  <use href="#diode-down" x="635" y="260"/>
  <line x1="635" y1="272" x2="635" y2="290" class="wire"/>
  <line x1="635" y1="290" x2="600" y2="290" class="wire"/>

  <!-- B2 Switch -->
  <use href="#switch" x="600" y="255"/>
  <text x="560" y="265" class="label-big">B₂</text>

  <!-- B2 to ground -->
  <line x1="600" y1="273" x2="600" y2="380" class="wire"/>

  <!-- ========== COMMON GROUND BUS ========== -->
  <line x1="150" y1="380" x2="650" y2="380" class="wire" stroke-width="3"/>
  <use href="#gnd" x="200" y="380"/>
  <use href="#gnd" x="400" y="380"/>
  <use href="#gnd" x="600" y="380"/>

  <!-- ========== TIMING DIAGRAM (bottom) ========== -->

  <text x="100" y="510" class="label-big">Séquence bipolaire temporelle:</text>

  <!-- Phase 1: Positive -->
  <rect x="100" y="520" width="150" height="30" fill="#dfd" stroke="#000"/>
  <text x="110" y="540" class="label">H₁+B₂ ON → V_AB = +25kV</text>

  <!-- Phase 2: Negative -->
  <rect x="260" y="520" width="150" height="30" fill="#fdd" stroke="#000"/>
  <text x="270" y="540" class="label">H₂+B₁ ON → V_AB = −25kV</text>

  <!-- Phase 3: Plateau -->
  <rect x="420" y="520" width="150" height="30" fill="#ddf" stroke="#000"/>
  <text x="430" y="540" class="label">BT₁ ON → V_A = +V plateau</text>

  <!-- Note -->
  <text x="100" y="575" class="label-small">Équilibrage des charges: ∫V⁺dt = ∫V⁻dt → pas d'électrolyse nette</text>

</svg>
