<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 750 480" width="750" height="480">
  <title>Double Pont H - Générateur Bipolaire Temporel</title>

  <defs>
    <style>
      .wire { stroke: #000; stroke-width: 2; fill: none; }
      .wire-thick { stroke: #000; stroke-width: 3; fill: none; }
      .label { font-family: Arial, sans-serif; font-size: 12px; fill: #000; }
      .label-big { font-family: Arial, sans-serif; font-size: 14px; fill: #000; font-weight: bold; }
      .label-small { font-family: Arial, sans-serif; font-size: 10px; fill: #666; }
      .node { fill: #000; }
      .optional { stroke: #c00; stroke-dasharray: 4 2; }
    </style>

    <!-- MOSFET N-channel symbol -->
    <g id="mosfet">
      <line x1="0" y1="-20" x2="0" y2="-10" stroke="#000" stroke-width="2"/>
      <line x1="0" y1="-10" x2="-6" y2="-10" stroke="#000" stroke-width="2"/>
      <line x1="-6" y1="-10" x2="-6" y2="10" stroke="#000" stroke-width="2"/>
      <line x1="-6" y1="10" x2="0" y2="10" stroke="#000" stroke-width="2"/>
      <line x1="0" y1="10" x2="0" y2="20" stroke="#000" stroke-width="2"/>
      <line x1="-10" y1="-8" x2="-10" y2="8" stroke="#000" stroke-width="2"/>
      <line x1="-10" y1="0" x2="-18" y2="0" stroke="#000" stroke-width="2"/>
      <polygon points="-6,0 -2,-3 -2,3" fill="#000"/>
      <line x1="0" y1="0" x2="-6" y2="0" stroke="#000" stroke-width="2"/>
    </g>

    <!-- Diode symbol (current flows up) -->
    <g id="diode-up">
      <line x1="0" y1="-15" x2="0" y2="-6" stroke="#000" stroke-width="2"/>
      <line x1="-7" y1="-6" x2="7" y2="-6" stroke="#000" stroke-width="2"/>
      <polygon points="-7,6 7,6 0,-6" fill="#000"/>
      <line x1="0" y1="6" x2="0" y2="15" stroke="#000" stroke-width="2"/>
    </g>

    <!-- Capacitor vertical -->
    <g id="capa-v">
      <line x1="0" y1="-12" x2="0" y2="-4" stroke="#000" stroke-width="2"/>
      <line x1="-8" y1="-4" x2="8" y2="-4" stroke="#000" stroke-width="3"/>
      <line x1="-8" y1="4" x2="8" y2="4" stroke="#000" stroke-width="3"/>
      <line x1="0" y1="4" x2="0" y2="12" stroke="#000" stroke-width="2"/>
    </g>

    <!-- Capacitor horizontal -->
    <g id="capa-h">
      <line x1="-12" y1="0" x2="-4" y2="0" stroke="#000" stroke-width="2"/>
      <line x1="-4" y1="-8" x2="-4" y2="8" stroke="#000" stroke-width="3"/>
      <line x1="4" y1="-8" x2="4" y2="8" stroke="#000" stroke-width="3"/>
      <line x1="4" y1="0" x2="12" y2="0" stroke="#000" stroke-width="2"/>
    </g>

    <!-- DC Voltage source -->
    <g id="source">
      <circle cx="0" cy="0" r="12" fill="none" stroke="#000" stroke-width="2"/>
      <line x1="-5" y1="-3" x2="5" y2="-3" stroke="#000" stroke-width="2"/>
      <line x1="0" y1="-8" x2="0" y2="2" stroke="#000" stroke-width="2"/>
      <line x1="-5" y1="5" x2="5" y2="5" stroke="#000" stroke-width="2"/>
    </g>

    <!-- Ground -->
    <g id="gnd">
      <line x1="0" y1="0" x2="0" y2="6" stroke="#000" stroke-width="2"/>
      <line x1="-10" y1="6" x2="10" y2="6" stroke="#000" stroke-width="2"/>
      <line x1="-6" y1="10" x2="6" y2="10" stroke="#000" stroke-width="2"/>
      <line x1="-3" y1="14" x2="3" y2="14" stroke="#000" stroke-width="2"/>
    </g>

    <!-- Arrow marker -->
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#00A"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="750" height="480" fill="#fff"/>

  <!-- Title -->
  <text x="375" y="25" class="label-big" text-anchor="middle">Double Pont H - Bipolaire Temporel ±25 kV</text>

  <!-- ========== BUS P (TOP) ========== -->
  <line x1="50" y1="60" x2="700" y2="60" class="wire-thick"/>
  <text x="60" y="52" class="label-big">P</text>

  <!-- ========== BUS N (BOTTOM) ========== -->
  <line x1="50" y1="320" x2="700" y2="320" class="wire-thick"/>
  <text x="60" y="338" class="label-big">N</text>

  <!-- ========== LEFT POWER SUPPLY (unique) ========== -->

  <!-- Source top -->
  <use href="#source" x="80" y="120"/>
  <line x1="80" y1="108" x2="80" y2="60" class="wire"/>
  <line x1="80" y1="132" x2="80" y2="190" class="wire"/>

  <!-- Source bottom -->
  <use href="#source" x="80" y="260"/>
  <line x1="80" y1="248" x2="80" y2="190" class="wire"/>
  <line x1="80" y1="272" x2="80" y2="320" class="wire"/>

  <!-- Node 0 (ground reference) -->
  <circle cx="80" cy="190" r="3" class="node"/>
  <line x1="80" y1="190" x2="110" y2="190" class="wire"/>
  <use href="#gnd" x="110" y="190"/>

  <!-- ========== STORAGE CAPACITORS ========== -->

  <!-- Capa top -->
  <line x1="140" y1="60" x2="140" y2="105" class="wire"/>
  <use href="#capa-v" x="140" y="120"/>
  <line x1="140" y1="132" x2="140" y2="190" class="wire"/>
  <line x1="140" y1="190" x2="110" y2="190" class="wire"/>

  <!-- Capa bottom -->
  <line x1="140" y1="190" x2="140" y2="248" class="wire"/>
  <use href="#capa-v" x="140" y="263"/>
  <line x1="140" y1="275" x2="140" y2="320" class="wire"/>

  <!-- ========== PONT H GAUCHE ========== -->

  <!-- MOSFET haut gauche -->
  <line x1="220" y1="60" x2="220" y2="80" class="wire"/>
  <use href="#mosfet" x="220" y="100"/>
  <line x1="220" y1="120" x2="220" y2="190" class="wire"/>

  <!-- Diode antiparallèle haut gauche -->
  <line x1="250" y1="80" x2="250" y2="60" class="wire"/>
  <line x1="250" y1="60" x2="220" y2="60" class="wire"/>
  <use href="#diode-up" x="250" y="100"/>
  <line x1="250" y1="115" x2="250" y2="140" class="wire"/>
  <line x1="250" y1="140" x2="220" y2="140" class="wire"/>
  <circle cx="220" cy="140" r="3" class="node"/>

  <!-- MOSFET bas gauche -->
  <line x1="220" y1="190" x2="220" y2="220" class="wire"/>
  <use href="#mosfet" x="220" y="240"/>
  <line x1="220" y1="260" x2="220" y2="320" class="wire"/>

  <!-- Diode antiparallèle bas gauche -->
  <line x1="250" y1="220" x2="250" y2="190" class="wire"/>
  <line x1="250" y1="190" x2="220" y2="190" class="wire"/>
  <use href="#diode-up" x="250" y="240"/>
  <line x1="250" y1="255" x2="250" y2="320" class="wire"/>
  <line x1="250" y1="320" x2="220" y2="320" class="wire"/>

  <!-- Node A -->
  <circle cx="220" cy="190" r="4" class="node"/>
  <text x="200" y="195" class="label-big">A</text>

  <!-- ========== PONT H DROIT ========== -->

  <!-- MOSFET haut droit -->
  <line x1="530" y1="60" x2="530" y2="80" class="wire"/>
  <use href="#mosfet" x="530" y="100"/>
  <line x1="530" y1="120" x2="530" y2="190" class="wire"/>

  <!-- Diode antiparallèle haut droit -->
  <line x1="560" y1="80" x2="560" y2="60" class="wire"/>
  <line x1="560" y1="60" x2="530" y2="60" class="wire"/>
  <use href="#diode-up" x="560" y="100"/>
  <line x1="560" y1="115" x2="560" y2="140" class="wire"/>
  <line x1="560" y1="140" x2="530" y2="140" class="wire"/>
  <circle cx="530" cy="140" r="3" class="node"/>

  <!-- MOSFET bas droit -->
  <line x1="530" y1="190" x2="530" y2="220" class="wire"/>
  <use href="#mosfet" x="530" y="240"/>
  <line x1="530" y1="260" x2="530" y2="320" class="wire"/>

  <!-- Diode antiparallèle bas droit -->
  <line x1="560" y1="220" x2="560" y2="190" class="wire"/>
  <line x1="560" y1="190" x2="530" y2="190" class="wire"/>
  <use href="#diode-up" x="560" y="240"/>
  <line x1="560" y1="255" x2="560" y2="320" class="wire"/>
  <line x1="560" y1="320" x2="530" y2="320" class="wire"/>

  <!-- Node B -->
  <circle cx="530" cy="190" r="4" class="node"/>
  <text x="540" y="185" class="label-big">B</text>

  <!-- ========== CENTER: SERIES CAPACITORS + CELL ========== -->

  <!-- Wire from A to C.1 -->
  <line x1="220" y1="190" x2="308" y2="190" class="wire"/>

  <!-- C.1 (optional series capacitor) -->
  <use href="#capa-h" x="320" y="190"/>
  <text x="320" y="175" class="label" text-anchor="middle">C.1</text>
  <rect x="300" y="165" width="40" height="15" fill="none" class="optional"/>

  <!-- Wire to Cell -->
  <line x1="332" y1="190" x2="360" y2="190" class="wire"/>

  <!-- Cell electrodes -->
  <line x1="360" y1="150" x2="360" y2="230" stroke="#000" stroke-width="5"/>
  <line x1="440" y1="150" x2="440" y2="230" stroke="#000" stroke-width="5"/>
  <text x="400" y="145" class="label-big" text-anchor="middle">Cellule</text>

  <!-- E-field arrow -->
  <line x1="375" y1="190" x2="420" y2="190" stroke="#00A" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="400" y="215" class="label-small" text-anchor="middle" fill="#00A">E</text>

  <!-- Wire from Cell to C4 -->
  <line x1="440" y1="190" x2="486" y2="190" class="wire"/>

  <!-- C4 (optional series capacitor) -->
  <use href="#capa-h" x="498" y="190"/>
  <text x="498" y="175" class="label" text-anchor="middle">C4</text>
  <rect x="478" y="165" width="40" height="15" fill="none" class="optional"/>

  <!-- Wire to B -->
  <line x1="510" y1="190" x2="530" y2="190" class="wire"/>

  <!-- ========== LEGEND ========== -->

  <rect x="30" y="360" width="690" height="110" fill="#f8f8f8" stroke="#ccc" rx="5"/>

  <text x="375" y="380" class="label-big" text-anchor="middle">Configurations</text>

  <!-- Config 1 -->
  <rect x="50" y="395" width="200" height="60" fill="#e8ffe8" stroke="#0a0" rx="4"/>
  <text x="150" y="415" class="label-big" text-anchor="middle" fill="#070">Capacitif (préconisé)</text>
  <text x="150" y="435" class="label" text-anchor="middle">Électrodes BaTiO₃</text>
  <text x="150" y="450" class="label-small" text-anchor="middle">Sans C.1, C4</text>

  <!-- Config 2 -->
  <rect x="270" y="395" width="200" height="60" fill="#fff8e8" stroke="#a80" rx="4"/>
  <text x="370" y="415" class="label-big" text-anchor="middle" fill="#850">Résistif + Capa série</text>
  <text x="370" y="435" class="label" text-anchor="middle">Électrodes métal + C.1, C4</text>
  <text x="370" y="450" class="label-small" text-anchor="middle">Champ alterné</text>

  <!-- Config 3 -->
  <rect x="490" y="395" width="210" height="60" fill="#ffe8e8" stroke="#a00" rx="4"/>
  <text x="595" y="415" class="label-big" text-anchor="middle" fill="#800">Résistif monopolaire</text>
  <text x="595" y="435" class="label" text-anchor="middle">Électrodes métal seul</text>
  <text x="595" y="450" class="label-small" text-anchor="middle" fill="#a00">Électrolyse - Non recommandé</text>

</svg>
